<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Vboar&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://kass.top/"/>
  <updated>2016-04-21T05:43:59.349Z</updated>
  <id>http://kass.top/</id>
  
  <author>
    <name>Justin Wong</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Javascript中的正则表达式</title>
    <link href="http://kass.top/2016/04/21/Regular-Expressions-in-Javascript/"/>
    <id>http://kass.top/2016/04/21/Regular-Expressions-in-Javascript/</id>
    <published>2016-04-21T05:43:12.000Z</published>
    <updated>2016-04-21T05:43:59.349Z</updated>
    
    <content type="html"></content>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="Web" scheme="http://kass.top/tags/Web/"/>
    
      <category term="Javascript" scheme="http://kass.top/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title>三四月份的暑期实习面试经历</title>
    <link href="http://kass.top/2016/04/21/interviews-in-March-and-April/"/>
    <id>http://kass.top/2016/04/21/interviews-in-March-and-April/</id>
    <published>2016-04-21T02:29:49.000Z</published>
    <updated>2016-04-21T05:44:07.727Z</updated>
    
    <content type="html">&lt;p&gt;三四月份我主要投了三家的暑期实习，分别是阿里、网易和腾讯，当然也有投其他的一些公司，但经历过面试的也只有这三家了。阿里是内推一面过了一个月之后显示已回绝，网易和腾讯还在等面试结果……不管怎么说，多参加一些面试总归是好的~&lt;/p&gt;
&lt;h3 id=&quot;阿里——淘宝FED前端&quot;&gt;&lt;a href=&quot;#阿里——淘宝FED前端&quot; class=&quot;headerlink&quot; title=&quot;阿里——淘宝FED前端&quot;&gt;&lt;/a&gt;阿里——淘宝FED前端&lt;/h3&gt;&lt;p&gt;阿里是3月6日学长内推过去的简历，然后3月7日下午就收到了电面电话，下面是我回忆的整个面试过程（过了一个多月可能有些忘掉了）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;面试官让我进行一分钟的自我介绍，然后我……没想到电面这么突然，并没有准备什么，所以只说了十多秒……&lt;/li&gt;
&lt;li&gt;然后面试官开始问简历上面的 &lt;a href=&quot;http://mebox.top/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;米盒&lt;/a&gt; 项目，并且他那边打开看了下，感觉他觉得不怎么样，然后让我介绍了下项目。&lt;/li&gt;
&lt;li&gt;面试官问：你在团队和项目中负责什么部分？略。&lt;/li&gt;
&lt;li&gt;面试官问：你作为组长，怎么管理小组、代码统一？我答统一编码规范blablabla……&lt;/li&gt;
&lt;li&gt;面试官问：你的项目有用到什么技术吗？我觉得这个答得很烂，因为我说没有用到什么技术，只是简单的Html、CSS、JS……&lt;/li&gt;
&lt;li&gt;面试官问：你在项目中遇到最大的困难是什么？我答了跨域问题以及解决方案，怎么解决。&lt;/li&gt;
&lt;li&gt;面试官问：你现在在一个创业团队里，为什么要来阿里实习？略。&lt;/li&gt;
&lt;li&gt;最后面试官问我还有什么问题，我就问他对我们的项目有什么看法，他说他主要是看面试者在面试中的表现，而不是看项目本身，而且他在大学的时候自己也有创业，而且他觉得90%的创业终究都会失败……&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;大概就这样扯了差不多20分钟吧，然后面试官说会在这周内出结果，然后就没有然后了，直到4月7日招聘官网上的状态变成了已回绝。&lt;/p&gt;
&lt;h3 id=&quot;网易——杭研互联网产品前端开发&quot;&gt;&lt;a href=&quot;#网易——杭研互联网产品前端开发&quot; class=&quot;headerlink&quot; title=&quot;网易——杭研互联网产品前端开发&quot;&gt;&lt;/a&gt;网易——杭研互联网产品前端开发&lt;/h3&gt;&lt;p&gt;网易是从 &lt;a href=&quot;http://www.nowcoder.com/162396&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;牛客网&lt;/a&gt; 那里拿到的内推码，然后就可以参加笔试了额，自我感觉笔试题做了不怎么样，最后两道JS编程题感觉都是凭感觉去写，结果4月7日收到了4月14日去杭州的面试通知短信和邮件，并且做完了一个测评（IQ题、EQ题、语言能力题、数学题等等）。&lt;br&gt;网易的所有面试都是在一个大厅里的，嗯，摆布得很有规则。&lt;/p&gt;
&lt;h4 id=&quot;一面&quot;&gt;&lt;a href=&quot;#一面&quot; class=&quot;headerlink&quot; title=&quot;一面&quot;&gt;&lt;/a&gt;一面&lt;/h4&gt;&lt;p&gt;一面的面试官是个哥哥，一面大概有半个小时吧，下面是面试过程：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;还是先让我自我介绍，然后他就开始看简历。在有阿里的教训之后，我当然会好好的准备一下自我介绍了。&lt;/li&gt;
&lt;li&gt;然后还是让我说一下 &lt;a href=&quot;http://mebox.top/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;米盒&lt;/a&gt; 项目，并且打开了网站，问我负责哪些部分，并且挑了个不是我写的问我这要怎么实现。&lt;/li&gt;
&lt;li&gt;下面就是一大堆常规问题了，有直接答的，也有画图的、写代码的：&lt;ul&gt;
&lt;li&gt;CSS盒模型、如何使width包括padding和border。&lt;/li&gt;
&lt;li&gt;写一个4个等分的div在同一行的布局；让div之间有空隙。&lt;/li&gt;
&lt;li&gt;写一个匿名自执行函数。&lt;/li&gt;
&lt;li&gt;说说你对闭包的理解。&lt;/li&gt;
&lt;li&gt;CSS中的动画怎么实现（写一个大框架）。&lt;/li&gt;
&lt;li&gt;简单说一下TCP的三次握手。&lt;/li&gt;
&lt;li&gt;HTTP状态码有哪些。&lt;/li&gt;
&lt;li&gt;DOM事件有哪些阶段（捕获和冒泡），还具体闻到了event的细节。&lt;/li&gt;
&lt;li&gt;call和apply的区别，知道bind吗。&lt;/li&gt;
&lt;li&gt;面向对象的特性，写一个JS里的继承（还关联到了各种继承方式的不同）。&lt;/li&gt;
&lt;li&gt;数据结构和算法：树的广度优先遍历用什么数据结构实现。&lt;/li&gt;
&lt;li&gt;等等&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;最后面试官问我还有什么问题，我问他网易对实习生的期望和要求是什么，实习生进去之后要做些什么。他说实习生要尽快融入团队和熟悉项目，然后就可以写一些项目的小部分了。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;二面&quot;&gt;&lt;a href=&quot;#二面&quot; class=&quot;headerlink&quot; title=&quot;二面&quot;&gt;&lt;/a&gt;二面&lt;/h4&gt;&lt;p&gt;二面的面试官是位和蔼的叔叔，二面的时间比较短，貌似只有十几分钟的样子，下面是面试过程：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自我介绍&lt;/li&gt;
&lt;li&gt;面试官先问了我，我的CSS和JS哪个强一点，我一开始还以为问的是CSS和JS哪个厉害，然后才明白问的是我的能力，就说差不多……&lt;/li&gt;
&lt;li&gt;让我惊讶的是二面的面试官问的是下面的这些问题：&lt;ul&gt;
&lt;li&gt;CSS3的新特性&lt;/li&gt;
&lt;li&gt;Html5的新特性&lt;/li&gt;
&lt;li&gt;清除浮动的方法和原理&lt;/li&gt;
&lt;li&gt;Javascript中的原型&lt;/li&gt;
&lt;li&gt;等等&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;有没有看过jQuery的源码。&lt;/li&gt;
&lt;li&gt;有没有用过网易的XXX框架。&lt;/li&gt;
&lt;li&gt;有没有了解过freemark。&lt;/li&gt;
&lt;li&gt;平时怎么学习前端，我说看书籍和网上的教程，书籍的话最近看《CSS权威指南》、《CSS设计指南》、《Javascript高级程序设计》、《Javascript权威指南》。都看完了吗，权威指南这么厚，我说没有，最近还在看，要把代码敲一遍，效果更好。&lt;/li&gt;
&lt;li&gt;什么时候能实习，我说七月份开始，可以实习六个月。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;HR面&quot;&gt;&lt;a href=&quot;#HR面&quot; class=&quot;headerlink&quot; title=&quot;HR面&quot;&gt;&lt;/a&gt;HR面&lt;/h4&gt;&lt;p&gt;HR面主要是一个大姐姐，旁边还坐着一个“阿姨”，时间的话大概十多分钟吧：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自我介绍&lt;/li&gt;
&lt;li&gt;介绍一下米盒&lt;/li&gt;
&lt;li&gt;我在项目中负责什么&lt;/li&gt;
&lt;li&gt;工作城市是什么&lt;/li&gt;
&lt;li&gt;还聊了一些其他的东西，具体的不记得了&lt;/li&gt;
&lt;li&gt;最后我问了她不同部门之间是如何沟通和交流的，她说当然有借助很多工具，但更重要的是面对面的沟通和交流。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;网易面试结束之后，花了两个多快三个小时绕着西湖走了一圈，真的是累坏了……&lt;/p&gt;
&lt;h3 id=&quot;腾讯——前端开发&quot;&gt;&lt;a href=&quot;#腾讯——前端开发&quot; class=&quot;headerlink&quot; title=&quot;腾讯——前端开发&quot;&gt;&lt;/a&gt;腾讯——前端开发&lt;/h3&gt;&lt;p&gt;腾讯的话三月份学长帮我内推完并没有什么反馈，最后还是参加了统一的笔试，虽然大部分都是c++题，没有前端题，但很幸运的是居然过了，于是从4月15日开始参加面试。腾讯的面试是在一间酒店里的，然后面试官是在单独的一间房间里。&lt;/p&gt;
&lt;h4 id=&quot;一面-1&quot;&gt;&lt;a href=&quot;#一面-1&quot; class=&quot;headerlink&quot; title=&quot;一面&quot;&gt;&lt;/a&gt;一面&lt;/h4&gt;&lt;p&gt;一面在4月15日上午10点多，面试官是一个大哥哥，感觉面试时间还蛮长的，也有半个多小时了。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自我介绍&lt;/li&gt;
&lt;li&gt;Javascript中有哪些基本数据类型&lt;/li&gt;
&lt;li&gt;CSS盒模型，如何使width包括padding和border&lt;/li&gt;
&lt;li&gt;代码题，写输出：this的理解&lt;/li&gt;
&lt;li&gt;判断是不是数组&lt;/li&gt;
&lt;li&gt;Javascript中的原型是干什么的&lt;/li&gt;
&lt;li&gt;说一下原生Ajax&lt;/li&gt;
&lt;li&gt;输入www.qq.com发生了什么&lt;/li&gt;
&lt;li&gt;要不要到深圳来，深圳招的人比较多&lt;/li&gt;
&lt;li&gt;智力题：给两个杯子，一个300ml，一个500ml，水无限，量出400ml的水。在面试官的指导下我才答出来。500ml杯装满水倒进300ml杯中，倒掉300ml杯中的水，500ml杯中剩下200ml倒进300ml杯中，然后500ml杯装满水倒满300ml杯中，则500ml杯中剩400ml水。&lt;/li&gt;
&lt;li&gt;有什么问题要问他，我就问腾讯对实习生的期望和要求是什么，他说对实习生的期望不高，主要是人才储备，达到双赢的局面。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;二面-1&quot;&gt;&lt;a href=&quot;#二面-1&quot; class=&quot;headerlink&quot; title=&quot;二面&quot;&gt;&lt;/a&gt;二面&lt;/h4&gt;&lt;p&gt;二面是在4月16日上午11点左右，面试官也算是个大哥哥吧，面了大概二十多分钟。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自我介绍&lt;/li&gt;
&lt;li&gt;性能优化的手段&lt;/li&gt;
&lt;li&gt;兼容性相关的内容&lt;/li&gt;
&lt;li&gt;你觉得jQuery还有什么不足&lt;/li&gt;
&lt;li&gt;对于项目的监控，有没有做&lt;/li&gt;
&lt;li&gt;像ReactJS和Vuejs有什么买点&lt;/li&gt;
&lt;li&gt;跨域的问题&lt;/li&gt;
&lt;li&gt;前端安全问题，XSS和CSRF，如何解决&lt;/li&gt;
&lt;li&gt;项目中遇到的最大的困难，怎么解决&lt;/li&gt;
&lt;li&gt;大学课程对于前端的学习有没有什么作用&lt;/li&gt;
&lt;li&gt;平时有没有关注什么关于前端的社区和博客&lt;/li&gt;
&lt;li&gt;有没有特别佩服的人，怎么努力&lt;/li&gt;
&lt;li&gt;职业规划，怎么努力&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;HR面-1&quot;&gt;&lt;a href=&quot;#HR面-1&quot; class=&quot;headerlink&quot; title=&quot;HR面&quot;&gt;&lt;/a&gt;HR面&lt;/h4&gt;&lt;p&gt;HR面是在4月16日下午五点左右，面了十分钟左右，面试官个漂亮的姐姐~&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自我介绍&lt;/li&gt;
&lt;li&gt;为什么选择前端&lt;/li&gt;
&lt;li&gt;为什么选择软件工程&lt;/li&gt;
&lt;li&gt;为什么在南京上大学&lt;/li&gt;
&lt;li&gt;工作城市的选择&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;腾讯应该是目前最想去的公司吧，然而现在还是等待面试结果中……&lt;/p&gt;
&lt;h3 id=&quot;小结&quot;&gt;&lt;a href=&quot;#小结&quot; class=&quot;headerlink&quot; title=&quot;小结&quot;&gt;&lt;/a&gt;小结&lt;/h3&gt;&lt;p&gt;通过这几次面试，发现自己还是有很多知识漏洞的，基本的CSS和JS还有很多没有掌握的地方，希望继续努力吧，把那几本书再认真看一遍，同时也要学习一些框架、工具和新技术。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;三四月份我主要投了三家的暑期实习，分别是阿里、网易和腾讯，当然也有投其他的一些公司，但经历过面试的也只有这三家了。阿里是内推一面过了一个月之后显示已回绝，网易和腾讯还在等面试结果……不管怎么说，多参加一些面试总归是好的~&lt;/p&gt;
&lt;h3 id=&quot;阿里——淘宝FED前端&quot;&gt;&lt;
    
    </summary>
    
    
      <category term="面试" scheme="http://kass.top/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>CSS中的单位：px、em和rem</title>
    <link href="http://kass.top/2016/04/20/px-em-rem-in-CSS/"/>
    <id>http://kass.top/2016/04/20/px-em-rem-in-CSS/</id>
    <published>2016-04-20T12:35:27.000Z</published>
    <updated>2016-04-22T05:17:28.295Z</updated>
    
    <content type="html">&lt;p&gt;最近我一直在做一个项目叫 &lt;a href=&quot;http://mebox.top/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;米盒&lt;/a&gt;（其实已经做了好几个月了= =），然后里面的度量单位大部分都是px，因为米盒也有Android和iOS的APP，所以并没有适配手机和做响应式什么的，所以就做了固定大小和定位的电脑网页版。但是我觉得后面肯定要做响应式的，所以参考了网上的几篇关于CSS中单位的文章，小结了一下~&lt;/p&gt;
&lt;h3 id=&quot;px、em和rem&quot;&gt;&lt;a href=&quot;#px、em和rem&quot; class=&quot;headerlink&quot; title=&quot;px、em和rem&quot;&gt;&lt;/a&gt;px、em和rem&lt;/h3&gt;&lt;p&gt;px：即Pixel（像素），相对长度单位，px是相对于显示器屏幕分辨率而言的。&lt;br&gt;em：相对长度单位，相对于当前对象内文本的字体尺寸。&lt;br&gt;rem：即root em，相对长度单位，相对于HTML根元素的字体尺寸。&lt;/p&gt;
&lt;p&gt;浏览器的默认设定：&lt;br&gt;大多数浏览器中html和body标签中的默认字体尺寸是100%。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;100% = 16px = 1em = 1rem&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;改变html标签的字体尺寸会影响到使用em和rem作为尺寸单位的标签，但px不受影响。&lt;br&gt;例子：&lt;a href=&quot;https://jsfiddle.net/vboar/bs5dmjko/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://jsfiddle.net/vboar/bs5dmjko/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;简化font-size的计算：&lt;br&gt;将html的font-size设为62.5%，那么1em=10px，1.6em=16px。&lt;br&gt;例子：&lt;a href=&quot;https://jsfiddle.net/vboar/25goahse/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://jsfiddle.net/vboar/25goahse/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;em和rem的区别：&lt;br&gt;em的值不是固定的，而且会继承父元素的字体尺寸；%也是会继承父元素的字体尺寸的。&lt;br&gt;而rem则仅仅相对于html根元素的字体尺寸而言，与父元素字体尺寸无关。&lt;br&gt;例子：&lt;a href=&quot;https://jsfiddle.net/vboar/1baoLbh7/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://jsfiddle.net/vboar/1baoLbh7/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;单位的最佳实践：&lt;br&gt;使用rem，并使用px作为备用单位，因为rem不支持IE8及其以下版本。&lt;br&gt;例子：&lt;a href=&quot;https://jsfiddle.net/vboar/Lpqpmans/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://jsfiddle.net/vboar/Lpqpmans/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;px、em、rem单位转换小工具：&lt;br&gt;地址：&lt;a href=&quot;http://pxtoem.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://pxtoem.com/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000002702464&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;关于CSS中的字体尺寸设置 - iLeo - SegmentFault&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.huolg.net/html5/html5_basis/641&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;css中px和em,rem的区别&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近我一直在做一个项目叫 &lt;a href=&quot;http://mebox.top/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;米盒&lt;/a&gt;（其实已经做了好几个月了= =），然后里面的度量单位大部分都是px，因为米盒也有Android和iOS的APP，所以并
    
    </summary>
    
    
      <category term="Web" scheme="http://kass.top/tags/Web/"/>
    
      <category term="CSS" scheme="http://kass.top/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>之前面试遇到的一道智力题</title>
    <link href="http://kass.top/2016/03/04/a-brain-teaser-in-an-interview/"/>
    <id>http://kass.top/2016/03/04/a-brain-teaser-in-an-interview/</id>
    <published>2016-03-04T04:20:31.000Z</published>
    <updated>2016-03-15T13:36:21.515Z</updated>
    
    <content type="html">&lt;p&gt;大二的时候参加了一次某外企实习生招聘的群面，其中有一道题目是智力题，题目大致就是这样的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;给一个瞎子52张扑克牌，并告诉他里面恰好有10张牌是正面朝上的。要求这个瞎子把牌分成两堆，使得每堆牌里正面朝上的牌的张数一样多。瞎子应该怎么做？（瞎子摸不出牌是正面或者是反面，但是却可以随意翻动每一张牌）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;当给出这道题目的时候，我还不知道这究竟是道什么类型的题目，该往什么方向去思考。当时是三个人一组一起讨论，我们一开始的思路都是偏向于概率论之类的数学思维上…所以最后也没能找到正确的答案。后来面试结束的时候，有同学就赶紧百度，结果发现答案却如此简单，只要找对了方向就好…&lt;/p&gt;
&lt;p&gt;我们先把52张牌分成两堆A和B，A堆中10张，B堆中42张。那么假设A堆中有m张正面，则有(10-m)张反面，B堆中有n张正面，则有(42-n)张反面。我们知道，m+n=10。那么可以把A堆翻过来，那么有(10-m)张正面，m张反面。显然这时候10-m=n，所以两堆牌里正面朝上的牌数一样多。&lt;/p&gt;
&lt;p&gt;当时没想出来的原因主要还是被题目的条件迷惑到了，他说“使得每堆牌里正面朝上的牌的张数一样多”，这并不需要保证两堆牌中每堆正面的牌都是5张，只要相同就可以了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;大二的时候参加了一次某外企实习生招聘的群面，其中有一道题目是智力题，题目大致就是这样的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;给一个瞎子52张扑克牌，并告诉他里面恰好有10张牌是正面朝上的。要求这个瞎子把牌分成两堆，使得每堆牌里正面朝上的牌的张数一样多。瞎子应该怎么做？
    
    </summary>
    
    
      <category term="面试" scheme="http://kass.top/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="智力题" scheme="http://kass.top/tags/%E6%99%BA%E5%8A%9B%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>同源策略和AJAX跨域请求的解决方案</title>
    <link href="http://kass.top/2016/03/03/same-origin-policy-and-solutions-for-cross-origin-ajax-request/"/>
    <id>http://kass.top/2016/03/03/same-origin-policy-and-solutions-for-cross-origin-ajax-request/</id>
    <published>2016-03-02T19:06:21.000Z</published>
    <updated>2016-03-15T13:36:24.813Z</updated>
    
    <content type="html">&lt;p&gt;之前写Web项目的时候一般都是用AJAX调用服务器提供的接口获得数据，但后来遇到了AJAX由于不同源而不用跨域请求的问题。为了实现AJAX跨域请求，我重新回顾了之前在《面向Web的计算》课上讲过的同源策略（Same Origin Policy, SOP），并了解AJAX跨域请求的几种常见的解决方案。结合网上的一些文章和参考资料，整理出下面的关于同源策略和AJAX跨域请求解决方案的笔记。&lt;/p&gt;
&lt;h3 id=&quot;同源策略（Same-Origin-Policy-SOP）&quot;&gt;&lt;a href=&quot;#同源策略（Same-Origin-Policy-SOP）&quot; class=&quot;headerlink&quot; title=&quot;同源策略（Same Origin Policy, SOP）&quot;&gt;&lt;/a&gt;同源策略（Same Origin Policy, SOP）&lt;/h3&gt;&lt;p&gt;同源策略，它是由 Netscape 提出的一个著名的安全策略，现在所有支持JavaScript 的浏览器都会使用这个策略。&lt;/p&gt;
&lt;p&gt;所谓同源，是指域名、协议、端口都相同。如果两个页面的域名、协议和端口都相同，那么这两个页面就同源，属于同一个域（Domain ）。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kass.top&quot;&gt;http://kass.top&lt;/a&gt; 和 &lt;a href=&quot;http://www.kass.top&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.kass.top&lt;/a&gt; 不同源，因为域名不同&lt;br&gt;&lt;a href=&quot;http://kass.top&quot;&gt;http://kass.top&lt;/a&gt; 和 &lt;a href=&quot;https://kass.top&quot;&gt;https://kass.top&lt;/a&gt; 不同源，因为协议不同&lt;br&gt;&lt;a href=&quot;http://kass.top:80&quot;&gt;http://kass.top:80&lt;/a&gt; 和 &lt;a href=&quot;http://kass.top:8080&quot;&gt;http://kass.top:8080&lt;/a&gt; 不同源，因为端口不同&lt;br&gt;&lt;a href=&quot;http://kass.top/tags&quot;&gt;http://kass.top/tags&lt;/a&gt; 和 &lt;a href=&quot;http://kass.top/about&quot;&gt;http://kass.top/about&lt;/a&gt; 同源&lt;/p&gt;
&lt;p&gt;同源策略限制了一个源中加载文本或脚本与来自其他源中资源的交互方式，简单的说就是一个源上的JS 只能访问当前源的资源。不同源的客户端脚本(javascript、ActionScript)在没明确授权的情况下，不能读写对方的资源。这些资源包括：DOM、通过AJAX请求的网络资源、cookie等。需要遵循同源策略的地方有：跨frame脚本、跨window脚本、cookie访问、XMLHttpRequest请求等。&lt;/p&gt;
&lt;p&gt;那为什么像script、style、img标签可以引入不同源的文本或脚本呢？因为同源策略本身是在Web前端的安全性和灵活性选择了一个平衡点，同源策略允许这些标签跨域引用资源而不必部署在同一台服务器上。&lt;/p&gt;
&lt;h4 id=&quot;如果不遵循同源策略，会这么样呢？&quot;&gt;&lt;a href=&quot;#如果不遵循同源策略，会这么样呢？&quot; class=&quot;headerlink&quot; title=&quot;如果不遵循同源策略，会这么样呢？&quot;&gt;&lt;/a&gt;如果不遵循同源策略，会这么样呢？&lt;/h4&gt;&lt;p&gt;1.链接跳转的问题：假设有一个钓鱼页面 &lt;a href=&quot;http://money.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://money.com/&lt;/a&gt; ，诱导用户在这个页面上打开 &lt;a href=&quot;http://www.alipay.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.alipay.com/&lt;/a&gt; （使用window.open打开），这时候钓鱼页面就可以获取支付宝页面窗口的句柄即window对象，即获得了对支付宝页面的控制权，账号密码什么的也就轻而易举地获得了。&lt;br&gt;2.AJAX请求的问题： 假设在 &lt;a href=&quot;http://money.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://money.com/&lt;/a&gt; 页面发起一个对 &lt;a href=&quot;http://www.alipay.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.alipay.com/&lt;/a&gt; 某接口的AJAX请求，如果不遵循同源策略，那么这样的请求是允许的，此次HTTP请求所带的cookie当然是 &lt;a href=&quot;http://www.alipay.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.alipay.com/&lt;/a&gt; 下的cookie，有了cookie，还有什么信息是不能获得的呢？&lt;/p&gt;
&lt;p&gt;可以看到，如果浏览器不遵循同源策略，将会存在很严重的安全性问题。但有的时候，我们需要在当前页面加载与其不同源的资源，比如AJAX跨域请求，在保证一定安全的情况下如何实现呢？&lt;/p&gt;
&lt;h3 id=&quot;AJAX跨域请求的解决方案&quot;&gt;&lt;a href=&quot;#AJAX跨域请求的解决方案&quot; class=&quot;headerlink&quot; title=&quot;AJAX跨域请求的解决方案&quot;&gt;&lt;/a&gt;AJAX跨域请求的解决方案&lt;/h3&gt;&lt;p&gt;AJAX（Asynchronous Javascript And XML），即异步Javascript和XML。AJAX的基础是XMLHttpRequest对象，之前提到过XMLHttpRequest对象是需要遵循同源策略的，所以AJAX跨域请求需要遵循同源策略。&lt;/p&gt;
&lt;p&gt;下面我们来验证一下AJAX的跨域请求。&lt;/p&gt;
&lt;p&gt;v1.com页面的代码如下，向v2.com发起一次AJAX请求。&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;//cdn.bootcss.com/jquery/2.2.1/jquery.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$.ajax(&quot;http://v2.com/&quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;v2.com返回一个字符串success。&lt;br&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; json_encode(&lt;span class=&quot;string&quot;&gt;&quot;success&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;控制台的输出结果如下，可以看到由于同源策略这样的AJAX跨域请求是不允许的。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;XMLHttpRequest cannot load http://v2.com/. No &amp;apos;Access-Control-Allow-Origin&amp;apos; header is present on the requested resource. Origin &amp;apos;http://v1.com&amp;apos; is therefore not allowed access.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;那么如何解决AJAX的跨域问题，实现AJAX的跨域请求呢？下面给出几种常见的解决方案。&lt;/p&gt;
&lt;h4 id=&quot;通过CORS进行跨域&quot;&gt;&lt;a href=&quot;#通过CORS进行跨域&quot; class=&quot;headerlink&quot; title=&quot;通过CORS进行跨域&quot;&gt;&lt;/a&gt;通过CORS进行跨域&lt;/h4&gt;&lt;p&gt;CORS（Cross-Origin Resource Sharing ），跨域资源共享，是W3C XMLHttpRequest Level 2 里规定的一种跨域方式。CORS定义了一种浏览器和服务器交互的方式来确定是否允许跨域请求。通过CORS实现AJAX跨域请求比较简单，只需要由服务器发送一个响应标头（Response Header）。&lt;/p&gt;
&lt;p&gt;如今基本上所有常用的浏览器都支持CORS（老IE除外），在 &lt;a href=&quot;http://caniuse.com/#feat=cors&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://caniuse.com/#feat=cors&lt;/a&gt; 中可以查询到浏览器对CORS的支持情况。可以看到，Chrome、Firefox、Safari、Opera、Edge、IE11以及移动设备浏览器等均支持CORS，所以我认为CORS可能是最好的实现AJAX跨域请求的解决方案。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;caniuse.com 是一个提供HTML5, CSS3, JS等新技术浏览器兼容一览表的网站，可以提高前端开发的工作效率。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;通过CORS实现AJAX跨域请求，需要服务器设置一个响应标头：设置Access-Control-Allow-Origin。&lt;/p&gt;
&lt;p&gt;HTTP头的设置方法有很多，下面以Apache和PHP为例：&lt;/p&gt;
&lt;p&gt;1.Apache：需要开启mod_headers模块，在配置文件中和.htaccess文件中均可以加入：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Header set Access-Control-Allow-Origin &amp;quot;*&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;设置为*即允许所有其他域发起的AJAX请求当前服务器的数据，这样是非常不安全的，所以应该设置为我们需要允许请求数据的域：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Header set Access-Control-Allow-Origin &amp;quot;http://v1.com&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;设置完之后，当我们访问v1.com时，控制台再也没有错误提示了，能够成功地获取v2.com的数据。&lt;/p&gt;
&lt;p&gt;2.PHP：直接在PHP代码中设置就好了：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;header(&lt;span class=&quot;string&quot;&gt;&quot;Access-Control-Allow-Origin: http://v1.com&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; json_encode(&lt;span class=&quot;string&quot;&gt;&quot;success&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;当然，nginx、tomcat等都可以设置HTTP头，更多的设置见 &lt;a href=&quot;http://enable-cors.org/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://enable-cors.org/server.html&lt;/a&gt; 。可以在 &lt;a href=&quot;http://client.cors-api.appspot.com/client&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://client.cors-api.appspot.com/client&lt;/a&gt; 进行CORS的测试。&lt;/p&gt;
&lt;p&gt;通过CORS实现AJAX的跨域请求就这么简单，但有时候还是会遇到少数浏览器不兼容的情况，我们需要检测浏览器是否支持CORS，原生Javacript发送AJAX请求代码如下：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; createCORSRequest = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;method, url&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; xhr = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; XMLHttpRequest();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;string&quot;&gt;&quot;withCredentials&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; xhr) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 判断XMLHttpRequest对象中是否有withCredentials属性&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// withCredentials属性仅仅存在于XMLHTTPRequest2对象中&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// Chrome, Firefox, Opera and Safari 均使用XMLHTTPRequest2对象&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xhr.open(method, url, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt; XDomainRequest != &lt;span class=&quot;string&quot;&gt;&quot;undefined&quot;&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 判断是否是XDomainRequest对象&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// XDomainRequest对象只存在于IE中，是IE用来实现CORS跨域请求的&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xhr = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; XDomainRequest();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xhr.open(method, url);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 浏览器不支持CORS&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xhr = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; xhr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; url = &lt;span class=&quot;string&quot;&gt;&#39;http://v2.com&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; method = &lt;span class=&quot;string&quot;&gt;&#39;GET&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; xhr = createCORSRequest(method, url);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!xhr) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;CORS not supported&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xhr.onload = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// Success code goes here.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; responseText = xhr.responseText;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(responseText);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xhr.onerror = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// Error code goes here.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;There was an error!&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xhr.send();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;标准的CORS请求默认不发送任何cookies。为了发送请求时包含cookies，需要设置XMLHttpRequest对象的withCredentials属性：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;xhr.withCredentials = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;若使用jQuery则代码如下：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$.ajax(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    type: &lt;span class=&quot;string&quot;&gt;&quot;get&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    url: &lt;span class=&quot;string&quot;&gt;&quot;http://v2.com&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xhrFields: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        withCredentials: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    data: &amp;#123;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    success: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;data&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// success&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    error: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;data&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       	&lt;span class=&quot;comment&quot;&gt;// error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;服务器（PHP为例）同时也要设置相应的HTTP头：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;header(&lt;span class=&quot;string&quot;&gt;&quot;Access-Control-Allow-Credentials: true&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;withCredentials属性会使请求中包含请求域（v2.com）中的所有cookies，返回的响应也会包含请求域（v2.com）中的所有cookies。但需要注意的是这些cookies仍然遵循同源策略，所以你的JS代码不能访问document.cookie或者response headers中的cookies。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.html5rocks.com/en/tutorials/cors/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.html5rocks.com/en/tutorials/cors/&lt;/a&gt; 中还提到simple requests和”not-so-simple requests” ，之后有时间再认真研究一下。&lt;/p&gt;
&lt;h4 id=&quot;使用JSONP实现跨域请求&quot;&gt;&lt;a href=&quot;#使用JSONP实现跨域请求&quot; class=&quot;headerlink&quot; title=&quot;使用JSONP实现跨域请求&quot;&gt;&lt;/a&gt;使用JSONP实现跨域请求&lt;/h4&gt;&lt;p&gt;JSONP的原理就是：因为&lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;标签是不受同源策略限制的，没有跨域限制，JSONP就是利用这点来实现跨域请求。当需要进行跨域请求时，JS脚本动态地添加&lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;标签，&lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;标签的src属性指向所需地址，如生成&lt;code&gt;&amp;lt;script src=&amp;quot;http://v2.com&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/code&gt;，然后JS和服务器约定一个回调函数名（默认为callback，不是callback的话需要以参数形式传给服务器），JS提供这个回调函数。服务器产生的响应为JSON数据的包装（即JSONP， JSON with Padding），如callback({“id”: 1, “name”, “vboar”})。这里的callback就是回调函数名，{“id”: 1, “name”, “vboar”}就是json数据，将作为callback函数的参数。这样的话，浏览器就会调用callback函数，并传递解析后的json对象作为参数，这样其实就能跨域接收数据了。&lt;/p&gt;
&lt;p&gt;用jQuery书写JSONP实现跨域请求的代码非常简单。&lt;/p&gt;
&lt;p&gt;前端JS代码：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$.ajax(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    url: &lt;span class=&quot;string&quot;&gt;&quot;http://v2.com&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jsonp: &lt;span class=&quot;string&quot;&gt;&quot;callback&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dataType: &lt;span class=&quot;string&quot;&gt;&quot;jsonp&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    data: &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    success: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;result&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(result);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    error: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&quot;error&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;后端PHP中不能直接返回JSON格式的数据，要返回 &lt;code&gt;回调函数(JSON数据)&lt;/code&gt; 这样形式的数据：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$arr = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;success&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; $_GET[&lt;span class=&quot;string&quot;&gt;&#39;callback&#39;&lt;/span&gt;].&lt;span class=&quot;string&quot;&gt;&#39;(&#39;&lt;/span&gt;.json_encode($arr).&lt;span class=&quot;string&quot;&gt;&#39;)&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用原生Javascript代码实现也不困难：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; callbackName = &lt;span class=&quot;string&quot;&gt;&#39;callback&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;[callbackName] = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;result&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(result);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; script = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&#39;script&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;script.src = &lt;span class=&quot;string&quot;&gt;&#39;http://v2.com?callback=&#39;&lt;/span&gt;+callbackName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.body.appendChild(script);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上述代码没有删除jsonp动态创建的节点，而jQuery方式会自动删除script节点。jQuery在onload/complete时，删除节点。除了删除节点，还需要删除节点上的属性吗？关于这点讨论，可以前往 &lt;a href=&quot;https://segmentfault.com/q/1010000000483131&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://segmentfault.com/q/1010000000483131&lt;/a&gt; 查看。&lt;/p&gt;
&lt;p&gt;那JSONP和CORS实现跨域请求对比，两者又有什么优点和缺点呢？&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;CORS支持所有类型的HTTP请求，而JSON只支持GET请求；&lt;/li&gt;
&lt;li&gt;使用CORS，开发者可以使用普通的XMLHttpRequest发起请求和获得数据，比起JSONP有更好的错误处理；&lt;/li&gt;
&lt;li&gt;JSONP主要被老的浏览器支持（&amp;lt; IE8），它们往往不支持CORS，而绝大多数现代浏览器都已经支持了CORS。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;实现AJAX跨域请求还有其他的方案，但CORS和JSONP应该是目前最常用的两种解决方案了，而且CORS更先进更方便更灵活，应该是实现AJAX跨域请求的主流方案了，毕竟用IE老古董的人越来越少了呀。&lt;/p&gt;
&lt;h3 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Javascript的同源策略 - MDN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://bbs.csdn.net/topics/390716390&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;浏览器同源策略 - CSDN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.jianshu.com/p/4e17445d66e2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;同源策略——浏览器的安全卫士 - 流星狂飙 - 简书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.zhihu.com/question/25427931&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;对于浏览器的同源策略你是怎样理解的呢？ - 知乎&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://enable-cors.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;enable cross-origin resource sharing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.html5rocks.com/en/tutorials/cors/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Using CORS - HTML5 Rocks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/hfahe/article/details/7730944&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTML5安全：CORS（跨域资源共享）简介 - 蒋宇捷 - CSDN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.iefans.net/ie10-cors-for-xhr/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;IE10中的CORS for XHR&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.jianshu.com/p/f3840c8c02ba&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ajax - 跨域请求 - happyLindz - 简书&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/2067472/what-is-jsonp-all-about&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;What is JSONP all about? - StackOverflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.zhihu.com/question/19966531&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;JSONP 的工作原理是什么？ - 知乎&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/q/1010000000483131&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;关于JSONP的两点疑问 - SegmentFault&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.jianshu.com/p/9d0fb4f47cc0&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Javascript跨域问题小记 - 射覆 - 简书&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;之前写Web项目的时候一般都是用AJAX调用服务器提供的接口获得数据，但后来遇到了AJAX由于不同源而不用跨域请求的问题。为了实现AJAX跨域请求，我重新回顾了之前在《面向Web的计算》课上讲过的同源策略（Same Origin Policy, SOP），并了解AJAX跨域
    
    </summary>
    
    
      <category term="Web" scheme="http://kass.top/tags/Web/"/>
    
      <category term="安全" scheme="http://kass.top/tags/%E5%AE%89%E5%85%A8/"/>
    
      <category term="AJAX" scheme="http://kass.top/tags/AJAX/"/>
    
  </entry>
  
  <entry>
    <title>真的开始写博客了&gt;_&lt;#</title>
    <link href="http://kass.top/2016/03/02/start-up-my-blog/"/>
    <id>http://kass.top/2016/03/02/start-up-my-blog/</id>
    <published>2016-03-02T08:01:17.000Z</published>
    <updated>2016-03-15T13:36:28.463Z</updated>
    
    <content type="html">&lt;p&gt;之前很多次都搭建了自己的博客，说要开始写博客，然而从大一都大三都没有实现= = 这几天忽然意识到自己真的已经大三了，而且要找实习了！！！然后发现自己两年多好像并没有学到什么东西…也就写了几个水水的大作业和项目。平时遇到什么问题和困难就百度谷歌一下，当时懂了就解决掉那个问题，然而过了很久之后…还是不懂…看别人写的技术博客感觉很有意思，然而过了很久什么都不记得…人懒啊，以至于读书笔记、学习笔记都不怎么写，更不用说博客了…那，去应聘的时候，我有什么资本说我很牛逼呢，凭什么让别人招了我。&lt;/p&gt;
&lt;p&gt;于是，这次真的下定决心了，即便花掉不少时间，也要认真地写博客，一是巩固自己对这方面的理解，二是将来可以回头看看，可以捡回来，说不定还有什么新的理解。&lt;/p&gt;
&lt;p&gt;新搭建的博客托管在GitHub Pages上。就近几天吧大致确定了自己未来的发展方向，目前暂时以Web前端开发为主吧，那博客的内容大多应该是围绕前端开发的吧= =&lt;/p&gt;
&lt;p&gt;最后希望自己能坚持下去，也希望内推面试要成功过啊！！！加油！！！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;之前很多次都搭建了自己的博客，说要开始写博客，然而从大一都大三都没有实现= = 这几天忽然意识到自己真的已经大三了，而且要找实习了！！！然后发现自己两年多好像并没有学到什么东西…也就写了几个水水的大作业和项目。平时遇到什么问题和困难就百度谷歌一下，当时懂了就解决掉那个问题，
    
    </summary>
    
    
      <category term="日常" scheme="http://kass.top/tags/%E6%97%A5%E5%B8%B8/"/>
    
  </entry>
  
</feed>
